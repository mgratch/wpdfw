function gformAddCurrencyFieldAction(r,e,c){var n=jQuery("#input_"+e+"_"+gf_currency.currency_field_id);if(n.length>0){var o=n.parents(".gform_page").attr("id");if("undefined"!=typeof o&&0<o.length){o=o.split("_");var f=o[3]}else f=c;if(f==c&&(n.on("change",{form_id:e},gformStartUpdateCurrency),gform.addFilter("gform_product_total","gform_product_total_currency"),0==gformCurrencyIsPostback(e))){gf_global.gf_currency_config.code=gf_currency.default_from,gf_global.default_currency_config=gf_global.gf_currency_config;var t=n.val();0<t.length&&gf_global.default_currency_config.code!==t&&n.trigger("change")}}}function gformStartUpdateCurrency(r){jQuery(this).prop("disabled",!0),gformAllProductFields("disable"),gformSubmitButtons("disable"),jQuery(this).after('<img id="gform_ajax_spinner_currency_field"  class="gform_ajax_spinner" src="'+gf_currency.spinner_url+'" alt="" />'),gformIsMultiPage(r.data.form_id)&&jQuery(".ginput_total_"+r.data.form_id).after('<img id="gform_ajax_spinner_total_field"  class="gform_ajax_spinner" src="'+gf_currency.spinner_url+'" alt="" />');{var e=jQuery(this).val();gformGetCurrency(e,r.data.form_id,this)}}function gformAllProductFields(r){jQuery(".gfield_price").each(function(){"disable"==r?(jQuery(this).find('input[type="text"], input[type="number"], select').prop("disabled",!0),jQuery(this).find('input[type="radio"], input[type="checkbox"]').prop("disabled",!0)):"enable"==r&&(jQuery(this).find('input[type="text"], input[type="number"], select').prop("disabled",!1),jQuery(this).find('input[type="radio"], input[type="checkbox"]').prop("disabled",!1))})}function gformSubmitButtons(r){"disable"==r?(jQuery(".gform_next_button").prop("disabled",!0),jQuery(".gform_previous_button").prop("disabled",!0),jQuery(".gform_button").prop("disabled",!0)):"enable"==r&&(jQuery(".gform_next_button").prop("disabled",!1),jQuery(".gform_previous_button").prop("disabled",!1),jQuery(".gform_button").prop("disabled",!1))}function gformGetCurrency(r,e,c){var n="",o={action:"gfp_more_stripe_get_currency",gfp_more_stripe_get_currency:gf_currency.nonce,currency:r};jQuery.post(gf_currency.ajaxurl,o,function(r){!0===r.success&&(n=r.data,n&&0!==n.length&&(gformFinishUpdateCurrency(n,e),jQuery(c).prop("disabled",!1),gformAllProductFields("enable"),gformSubmitButtons("enable"))),jQuery("#gform_ajax_spinner_currency_field").remove(),jQuery("#gform_ajax_spinner_total_field").remove()})}function gformFinishUpdateCurrency(r,e){if(gf_global.gf_currency_config.code!==r.code){gf_global.prev_currency_config=gf_global.gf_currency_config,gf_currency.currency_config=r;for(var c=0;c<_gformPriceFields[e].length;c++)gformChangePriceDisplay(e,_gformPriceFields[e][c]);gf_global.gf_currency_config=r;for(e in _gformPriceFields)_gformPriceFields.hasOwnProperty(e)&&gformCalculateTotalPrice(e)}}function gformChangePriceDisplay(r,e){var c="_"+r+"_"+e,n="text",o=jQuery(".gfield_product"+c).find("input.ginput_amount");if(0<o.length)n="val",gformUpdatePriceDisplay(n,o);else if(o=jQuery(".gfield_product"+c).find("span.ginput_product_price"),0<o.length)gformUpdatePriceDisplay(n,o);else if(o=jQuery(".gfield_option"+c+", .gfield_shipping_"+r).find("span.ginput_price"),0<o.length)o.each(function(){var r=jQuery(this).text();r=r.trim();var e=r.charAt(0);if("+"==e||"-"==e){var c=e;r=r.replace(e,""),c+=gformCurrencyConvertPrice(r)}else var c=gformCurrencyConvertPrice(r);jQuery(this).text(c)});else if(o=jQuery(".gfield_option"+c+", .gfield_shipping_"+r).find("select"),0<o.length){var f=gformCurrencyGetPrice(o.val());f=gf_money(f).from(gf_global.default_currency_config.code).to(gf_currency.currency_config.code),o.children("option").each(function(){var c=jQuery(this),n=gformCurrencyGetOptionLabel(c,c.val(),f,r,e);c.html(n)})}else o=jQuery(".gfield_shipping_"+r).find("span.ginput_shipping_price"),0<o.length&&gformUpdatePriceDisplay(n,o)}function gformUpdatePriceDisplay(r,e){if("val"===r){var c=gformCurrencyConvertPrice(e.val());e.val(c)}else{var c=gformCurrencyConvertPrice(e.text());e.text(c)}}function gformCurrencyGetPrice(r){var e=r.split("|"),c=new Currency(gf_global.default_currency_config);return e.length>1&&c.toNumber(e[1])!==!1?c.toNumber(e[1]):0}function gformCurrencyConvertPrice(r){var e=gformCurrencyToNumber(r);return e=gf_money(e).from(gf_global.gf_currency_config.code).to(gf_currency.currency_config.code),gf_global.gf_currency_config=gf_currency.currency_config,r=gformFormatMoney(e),gf_global.gf_currency_config=gf_global.prev_currency_config,r}function gformCurrencyToNumber(r){return gformIsNumber(r)?parseFloat(r):gformCurrencyCleanNumber(r,gf_global.gf_currency_config.symbol_right,gf_global.gf_currency_config.symbol_left,gf_global.gf_currency_config.decimal_separator)}function gformCurrencyCleanNumber(r,e,c,n){r+=" ",r=r.replace(/&.*?;/,"",r),r=r.replace(e,""),r=r.replace(c,"");for(var o="",f=!1,t=0;t<r.length;t++){var g=r.substr(t,1);parseInt(g)>=0&&parseInt(g)<=9?o+=g:g==n&&(gformIsNumber(r.substr(t+1,1))||gformIsNumber(r.substr(t-1,1)))?o+=g:"-"==g&&(f=!0)}for(var i="",t=0;t<o.length;t++){var _=o.substr(t,1);_>="0"&&"9">=_?i+=_:_==n&&(i+=".")}return f&&(i="-"+i),gformIsNumber(i)?parseFloat(i):!1}function gformIsMultiPage(r){var e=!1,c=jQuery("#gform_target_page_number_"+r).val(),n=jQuery("#gform_source_page_number_"+r).val();return(0!==c||1!==n)&&(e=!0),e}function gformCurrencyIsPostback(r){var e=!1;return e=0<jQuery("#gform_ajax_frame_"+r).contents().find("*").html().indexOf("GF_AJAX_POSTBACK")?!0:"undefined"!=typeof gf_currency.is_postback}function gformCurrencyGetOptionLabel(r,e,c,n,o){r=jQuery(r);var f=gformCurrencyGetPrice(e);f=gf_money(f).from(gf_global.default_currency_config.code).to(gf_currency.currency_config.code);var t=r.attr("price"),g=r.html().replace(/<span(.*)<\/span>/i,"").replace(t,"");gf_global.gf_currency_config=gf_currency.currency_config;var i=gformGetPriceDifference(c,f);i=0==gformToNumber(i)?"":" "+i;var _="option"==r[0].tagName.toLowerCase()?" "+i:"<span class='ginput_price'>"+i+"</span>",u=g+_;return window.gform_format_option_label&&(u=gform_format_option_label(u,g,_,c,f,n,o)),gf_global.gf_currency_config=gf_global.prev_currency_config,u}function gform_product_total_currency(r,e){if("0"!==e&&"undefined"!=typeof gf_currency.currency_config){gf_global.gf_currency_config=gf_global.default_currency_config;var c=0;_anyProductSelected=!1;for(var n=0;n<_gformPriceFields[e].length;n++){var o=e,f=_gformPriceFields[e][n];gformCurrencyUpdateLabel(o,f);var t="_"+o+"_"+f,g=jQuery(".gfield_product"+t+" .ginput_amount");if(g.length>0){var i=g.val();gformIsHidden(g)&&(i=0);var _=new Currency(gf_currency.currency_config);i=_.toNumber(i),c+=i===!1?0:i}else c+=gf_money(gformGetBasePrice(o,f)).from(gf_global.default_currency_config.code).to(gf_currency.currency_config.code);jQuery(".gfield_option"+t).find("input:checked, select").each(function(){gformIsHidden(jQuery(this))||(c+=gf_money(gformGetPrice(jQuery(this).val())).from(gf_global.default_currency_config.code).to(gf_currency.currency_config.code))});var u=gformGetProductQuantity(o,f);u>0&&(_anyProductSelected=!0),c*=u,c=Math.round(100*c)/100}if(_anyProductSelected){var a=gformGetShippingPrice(e);c+=gf_money(a).from(gf_global.default_currency_config.code).to(gf_currency.currency_config.code)}var l=0;if(0===gf_currency.currency_config.decimals)l=Math.round(c);else{c=c.toString();for(var y=0;y<c.length;y++){var d=c.substr(y,1);l+=gf_global.gf_currency_config.thousand_separator==d?gf_currency.currency_config.thousand_separator:gf_global.gf_currency_config.decimal_separator==d?gf_currency.currency_config.decimal_separator:d}}r=l,gf_global.gf_currency_config=gf_currency.currency_config}return r}function gformCurrencyUpdateLabel(r,e){var c="_"+r+"_"+e;if(gformCurrencyIsPostback(r)){var n=jQuery("#ginput_base_price"+c);if(0<n.length){var o=n.val(),f=new Currency(gf_global.gf_currency_config);o=f.toNumber(o),o=o===!1?0:o,o=gf_money(o).from(gf_global.default_currency_config.code).to(gf_currency.currency_config.code),gf_global.gf_currency_config=gf_currency.currency_config,jQuery(".gfield_product"+c).find("span.ginput_product_price").text(gformFormatMoney(o)),gf_global.gf_currency_config=gf_global.default_currency_config}}jQuery(".gfield_option"+c+", .gfield_shipping_"+r).find("select").each(function(){var e=jQuery(this),c=gformGetPrice(e.val());c=gf_money(c).from(gf_global.default_currency_config.code).to(gf_currency.currency_config.code);var n=e.attr("id").split("_")[2];e.children("option").each(function(){var e=jQuery(this),o=gform_product_total_currency_GetOptionLabel(e,e.val(),c,r,n);e.html(o)})}),jQuery(".gfield_option"+c).find(".gfield_checkbox").find("input").each(function(){var e=jQuery(this),c=e.attr("id"),n=c.split("_")[2],o=c.replace("choice_","#label_"),f=jQuery(o),t=gform_product_total_currency_GetOptionLabel(f,e.val(),0,r,n);f.html(t)}),jQuery(".gfield_option"+c+", .gfield_shipping_"+r).find(".gfield_radio").each(function(){var e=0,c=jQuery(this),n=c.attr("id"),o=n.split("_")[2],f=c.find("input:checked").val();f&&(e=gformGetPrice(f),e=gf_money(e).from(gf_global.default_currency_config.code).to(gf_currency.currency_config.code)),jQuery(this).find("input").each(function(){var c=jQuery(this),n=c.attr("id").replace("choice_","#label_"),f=jQuery(n),t=gform_product_total_currency_GetOptionLabel(f,c.val(),e,r,o);f.html(t)})})}function gform_product_total_currency_GetOptionLabel(r,e,c,n,o){r=jQuery(r);var f=gformGetPrice(e);f=gf_money(f).from(gf_global.default_currency_config.code).to(gf_currency.currency_config.code);var t=r.attr("price"),g=r.html().replace(/<span(.*)<\/span>/i,"").replace(t,"");gf_global.gf_currency_config=gf_currency.currency_config;var i=gformGetPriceDifference(c,f);i=0==gformToNumber(i)?"":" "+i,r.attr("price",i),gf_global.gf_currency_config=gf_global.default_currency_config;var _="option"==r[0].tagName.toLowerCase()?" "+i:"<span class='ginput_price'>"+i+"</span>",u=g+_;return window.gform_format_option_label&&(u=gform_format_option_label(u,g,_,c,f,n,o)),u}var gf_money=fx.noConflict();gf_money.base=gf_currency.base,gf_money.rates=gf_currency.rates,jQuery(document).ready(function(){jQuery(document).on("gform_post_render",gformAddCurrencyFieldAction)});